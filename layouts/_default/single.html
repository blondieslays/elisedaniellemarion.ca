<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }}</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/custom.css">
</head>
<body>

<!-- Symbols Menu -->
<nav class="symbol-menu">
    <ul>
        <li><a href="/" title="Home"><img src="/images/menu-icons/arrow.png" alt="Home" width="32" height="32"></a></li>
        <li><a href="/gallery/prometheus/" title="Prometheus"><img src="/images/menu-icons/fire.png" alt="Prometheus" width="32" height="32"></a></li>
        <li><a href="/gallery/epimetheus/" title="Epimetheus"><img src="/images/menu-icons/moon.png" alt="Epimetheus" width="32" height="32"></a></li>
        <li><a href="/gallery/pandora/" title="Pandora"><img src="/images/menu-icons/sun.png" alt="Pandora" width="32" height="32"></a></li>
    </ul>
</nav>

<!-- Page Title with Padding -->
<div class="page-title-container">
    <h1 class="page-title">{{ .Title }}</h1>
</div>


<!-- Single Tile Container with Story Image -->
<div class="single-tile-container">
    <div class="hover-tile">
        <div class="tile-inner">
            <img class="tile-front" src="{{ .Params.contentImage }}" alt="Front of {{ .Title }}">
            <img class="tile-back" src="/images/single/{{ .Params.imageBack }}" alt="Back of {{ .Title }}">
        </div>
    </div>
</div>


<!-- Green Band with Pagination Arrows and Description -->
<div class="green-band">
    <div class="nav-arrows">
        <!-- Define the custom order of tiles -->
        {{ $tileOrder := slice "Pyr" "Philanthropia" "Phronesis" "Zoa" "Ameles" "Physis" "Pyxis" "Kakon" "Elpis" }}

        <!-- Ensure the current page is found by title -->
        {{ $currentPage := . }}
        {{ $currentIndex := -1 }}

        <!-- Find the index of the current page title -->
        {{ range $index, $name := $tileOrder }}
            {{ if eq $name $currentPage.Title }}
                {{ $currentIndex = $index }}
            {{ end }}
        {{ end }}

        <!-- Proceed only if a valid index is found -->
        {{ if ne $currentIndex -1 }}
            <!-- Calculate previous and next indices -->
            {{ $totalTiles := len $tileOrder }}
            {{ $prevIndex := mod (add $currentIndex (sub $totalTiles 1)) $totalTiles }}
            {{ $nextIndex := mod (add $currentIndex 1) $totalTiles }}

            <!-- Fetch the previous and next tiles -->
            {{ $prevTile := (index (where site.RegularPages "Title" (index $tileOrder $prevIndex)) 0) }}
            {{ $nextTile := (index (where site.RegularPages "Title" (index $tileOrder $nextIndex)) 0) }}

            <!-- Previous Arrow -->
            <a href="{{ $prevTile.RelPermalink }}" class="nav-button left">
                <img src="/images/navigation-arrows/arrow-left.png" alt="Previous">
            </a>

            <!-- Band Text / Description -->
            <p class="nav-description">{{ .Params.bandText }}</p>

            <!-- Next Arrow -->
            <a href="{{ $nextTile.RelPermalink }}" class="nav-button right">
                <img src="/images/navigation-arrows/arrow-right.png" alt="Next">
            </a>
        {{ else }}
            <p>Error: Current page not found in the tile order.</p>
        {{ end }}
    </div>
</div>

<!-- Story Content (without image) -->
<div class="story-content">
    <h2>{{ .Params.contentTitle }}</h2>
    <p>{{ .Params.contentText1 }}</p>
    <p>{{ .Params.contentText2 }}</p>
    <p>{{ .Params.contentText3 }}</p>
</div>

{{ if .Params.pdf }}
<div class="download-article">
    <a href="/pdf/{{ .Params.pdf }}" download class="download-button">
        <img src="/images/download-icon.png" alt="Download Icon" class="download-icon">
        <span>Download the full article on {{ .Title }}</span>
    </a>
</div>
{{ end }}



</body>
</html>

